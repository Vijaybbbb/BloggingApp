<!DOCTYPE html>
<html lang="en">
<head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>Document</title>
       <link rel="stylesheet" href="/css/myCart.css">
</head>
<body>
     <form action="" method="post">  
          <div class="checkout">
  <div class="container checkout-container">
    <div class="checkout-title">
      
     
    </div>
    <div class="checkout-order">
      <div class="checkout-col order-col">
        <h3 class="checkout-col-headline">Your order<i class="checkout-icon fa fa-angle-up"></i></h3>
        <div class="checkout-col-inner">
          <div class="checkout-col-header">
            <div class="checkout-button">
              <button class="black-button bold-text"><i class="fa fa-chevron-left"></i>Edit Cart</button>
            </div>
          </div>
          <div class="checkout-order-info">
            
           <% carts.forEach(cart => { %>
            <div class="order-card">
              <div class="order-row order-headline">
                <span class="bold-text"><%= cart.title  %></span>
                <span class="bold-text">Payment Today</span>
              </div>
              <div class="order-row order-detail">
                <img class="order-img" src="<%= cart.coverImageURL %>" alt="lwejd">
                <i class="order-icon red-text fa fa-close"></i>
              </div>
              <div class="order-row">
                <span class="order-product-name red-text bold-text">Payable Amount</span>
                <span class="order-product-price text-right">$2450.00</span>
              </div>
              
              <div class="order-row">
                <span class="order-payment-col order-payment-type bold-text"> <%= cart.blogId  %></span>
                <a href="/premium/removeCartProduct?userId=<%= userId %>&id=<%= cart._id %>"> Remove</a>
                
              </div>
            </div>
            <% }); %>


            <div class="order-card-bill">
              <span class="order-bill-row">
              <span class="order-bill-sub text-right">Subtotal: $0.00</span>
              <span class="order-bill-total text-right bold-text">Total: $0.00</span>
            </div>

            <div class="checkout-order-discount gray-bg">
              <form class="order-discount-form">
                <input class="checkout-input" placeholder="Discount Code" />
              </form>
              <button class="black-button bold-text">Apply</button>   <button class="black-button bold-text">Proceed To Payment</button>
            </div>
          </div>
        </div>
        <div class="checkout-col-footer">
          <h3 class="checkout-col-headline">Additional Information<i class="checkout-icon fa fa-angle-up"></i></h3>
          <div class="checkout-order-note">
            <span class="order-note-title">Order notes</span>
            <textarea rows="4" placeholder="Note about your order"class="order-textarera"></textarea>
          </div>
        </div>
      </div>
        
     
    


    </div>
  </div>
</div>
</div>
</form>
</body>

<script>
  function calculateTotalPrice() {
      // Get all elements with class 'order-product-price'
      const productPriceElements = document.querySelectorAll('.order-product-price');

      let subtotal = 0;

      // Loop through each product price element and add its value to subtotal
      productPriceElements.forEach(element => {
          const priceText = element.textContent.trim().replace('$', ''); // Remove '$' and trim any whitespace
          const price = parseFloat(priceText);
          if (!isNaN(price)) {
              subtotal += price;
          }
      });
      
      // Update subtotal in the HTML
      const subtotalElement = document.querySelector('.order-bill-sub');
      subtotalElement.textContent = `Subtotal: $${subtotal.toFixed(2)}`;

      // Calculate and update total
      const totalElement = document.querySelector('.order-bill-total');
      totalElement.textContent = `Total: $${subtotal.toFixed(2)}`;
  }

  // Call the function to calculate the total initially
  calculateTotalPrice();
</script>

</html>